
<script src="scripts/rules_list.js" ></script>
<script src="scripts/addRule.js" ></script>

<style>
    .divStyle {float:left; margin: 0 0 0 250;}
</style>

<div id="add_rule" class="lightbox" >
	<div id="close" class="close">
		<a href="javascript:RulesList.closeBox(false);"><img src="images/light-box-close.png"></a>
	</div>
    <table id="add_rule_table" class="outer" >
        <tbody>
        	<tr>
            	<td id="hdr_td" style="padding: 0pt;">
            		<h4 style="font-weight: normal;"><span id ="headerspan">Add Rule</span></h4>
            	</td>
        	</tr>
        	<tr>
            	<td id="msg_td">
                	<div id ="ruleDiv" class="instructional" style="text-align: center; width: 100%;">
                		<table align="center" width="100%" style="border-collapse: collapse;">
							<tr>
											<td id="msg_td">
												<div class="instructional" style=""><span id="instruction">Rules are set for the threshold conditions by the user. Alerts are generated when a rule specified by user is violated.An alert is used to highlight an event that needs to be examined.</span> 
												</div>
											</td>
							</tr>
							<tr>
								<td>	
							<form>
							<div id="rulediv1" style="">
								<table id="ruletbl1" style="width: 100%;">
									<tbody>
										<tr>
										<td style="text-align: left;">
											Rule ID
										</td>
										<td style="text-align: left;">
											<input type="text" id="ruleId" width="180px" style="width:180px;">
										</td>
									</tr>
								
									<tr>
										<td style="text-align: left;">
											Node 
										</td>
										<td style="text-align: left;">
											<select name="nodeIds" id="nodeIds" onChange="javascript:changeAttributes();" width="180px" style="width:192px;">
											</select>
										</td>
									</tr>
									<tr>
										<td style="text-align: left;">
											Severity
										</td>
										<td style="text-align: left;">
											<select name="severity" class="shuffle_select" id="severity" width="180px" style="width:192px;">
											<option value="Warning">Warning</option>
											<option value="Error">Error</option></select>
										</td>
									</tr>
									<tr>
										<td style="text-align: left;">
											Enable Notification
										</td>
										<td style="text-align: left;">
											<input type = "checkbox" id = 'enableNotificationCheckbox' style = "">
										</td>
									</tr>
									<tr>
										<td colspan="2" style="text-align: right;">
										 
											<input type="button" name="rulenext" value="Next" onclick="javascript:nextRuleStep(2);" class="buttonClass"> 
											<input type="button" name="cancel" value="Cancel" onclick="javascript:RulesList.closeBox(false);" class="buttonClass">
										</td>
									
										</tr>
								</tbody></table>
							</div>
							<div id ="rulediv2" style="display: none;">
								<span>Notification Type </span>
								<select name="notificationType" onchange="javascript: enableNotification();" id = "notificationType" style="margin: 0 0 0 10px; width:180px;" width="180px" >
									<!-- <option value="Select">Select Type</option>	 -->
									<option value="Email">Email</option>
									<option value="Log">Log</option>
										<!-- <option value="SMS">SMS</option> -->
								</select>
								<table style="text-align: left;" id = "notificationTable">
									<tbody>
										<tr>
											<td>&nbsp;</td>
											<td style="color: #ff0000; padding-left: 30px; text-align: left;">
												When rule violates</td>
											<td  style="color: green; padding-left: 30px; text-align: left;">
												When rule comes out of violation</td>
										</tr>
										<tr>
											<td width="20%" class="form_td">Subject</td>
											<td  class="form_td"><input type="text" name="alertRaisedNotificationSubject" id="alertRaisedNotificationSubject" size="40" value="" class="list_td"></td>
											<td  class="form_td"><input type="text" name="alertResetNotificationSubject" id="alertResetNotificationSubject" size="40" value="" class="list_td"></td>
										</tr>
										<tr>
											<td width="20%" class="form_td" valign="top"></td>
											<td  class="form_td"><input type="checkbox" name="detailsInRaised" id ="detailsInRaised" onclick="javascript:doDetailsNotif(document, this, true);">
												Include attribute values of monitor in message</td>
											<td  class="form_td"><input type="checkbox" name="detailsInReset"  id ="detailsInReset" onclick="javascript:doDetailsNotif(document, this, false);">
												Include attribute values of monitor in message</td>
										</tr>
										<tr>
											<td width="20%" class="form_td" valign="top">Message</td>
											<td  class="form_td"><textarea name="alertRaisedNotificationMessage" id="alertRaisedNotificationMessage" cols="40" rows="5" class="list_td"></textarea></td>
											<td  class="form_td"><textarea name="alertResetNotificationMessage" id="alertResetNotificationMessage" cols="40" rows="5" class="list_td"></textarea></td>
										</tr>
										<tr></tr>
									</tbody>
								</table>
								<table id = 'logTypeContainerDiv' style="display: none;">
									<tr>
										<td></td>
										<td style="color: #ff0000; padding-left: 30px; text-align: left;">
											When rule violates</td>
										<td  style="color: green; padding-left: 30px; text-align: left;">
											When rule comes out of violation</td>
									</tr>
									<tr>
											<td>Message</td>
											<td><textarea id = "logRaisedMessageRulesForAlert" rows="5" cols="40"></textarea></td>
											<td><textarea id = "logResetMessageRulesForAlert" rows="5" cols="40"></textarea></td>
									</tr>
								</table>
								<table id = "navButtons">
									<tr>
										<td colspan="3" style="text-align: right;" width="20%">
											<input type="button" name="rulenext" value="Back" onclick="javascript:nextRuleStep(1);" class="buttonClass">
											<input type="button" name="rulenext" id = "rulenext" value="Next" onclick="javascript:nextRuleStep(3);" class="buttonClass"> 
											<input type="button" name="cancel" value="Cancel" onclick="javascript:RulesList.closeBox(false);" class="buttonClass">
										</td>
									</tr>
								</table>
							</div>
							
						
							<div id = "rulediv3" style="display: none;">
								<table>
												<tr>
													<td class="form_td" colspan="3" style="text-aligh:left;"><select
														class="report_list_box" name="attr_list" id="attr_list" style="width:auto;"
														>
													</select> <input type="button" name="add" value="Add"
														onclick="javascript:addElement('false');"
														class="buttonClass"></td>
												</tr>
												<tr>
													<td colspan="2">
													<table id="subExprsTable" style="width:850px;">
													</table>
													</td>
												</tr>
												<tr>
												<td colspan="2" style="text-align: right;">
													<input type="button" name="rulenext" value="Back" onclick="javascript:nextRuleStep(0);" class="buttonClass">
													<input type="button" name="rulecreate" id = "rule.add" value="Add" onclick="javascript:addRule();" class="buttonClass">
													 <input	type="button" name="cancel" value="Cancel" onclick="javascript:RulesList.closeBox(false);" class="buttonClass">
												</td>
												</tr>
										</table>
							</div>
							
						</form>
						</td>
						</tr>
						</table>
						</div>
						</td>
						</tr>
						</tbody>
						</table>
						</div>
						
						
					
	
	<script>
	isTableCreated  = false;
	findNodes();
	$('#ruleId').val("Rule"+(totalRules+1));
	RemoteManager.getNotificationSettings(setNotificationSettings);

	</script>
	