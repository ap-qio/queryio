<link rel="stylesheet" href="styles/nd.css" type="text/css" />
<link rel="stylesheet" href="styles/data_analyzer.css" type="text/css" />

<script src="scripts/data-analyzer.js"></script>

<!-- script src="scripts/jquery.custom.jqplot.js"></script-->
<script type="text/javascript" src="scripts/report_chart.js"></script>
<script type="text/javascript" src="scripts/chart_preferences.js"></script>

<div class="queryHeader" style="text-align: left; margin-top: 8px;">
	<img id="expandQueryDesign" src="images/Right.png"
		style="display: none; height: 15px;"> <img
		id="shrinkQueryDesign" src="images/Down.png" style="height: 15px;">
	<span style="margin-left: 5px;">Query Builder</span>
</div>
<iv id="rightPart" class="designBackground">
<div style="height: auto;">
	<table>
		<tr style="display: none;">
			<td nowrap="nowrap"><span
				style="margin-left: 10px; margin-right: 5px">Query Id: </span></td>
			<td nowrap="nowrap" style="width: 10%"><input type='search'
				placeholder="Query Id" id="queryId" style="width: 100%"> <span
				style="color: red; margin-left: 0px; vertical-align: top">*</span></td>

			<td nowrap="nowrap"><span
				style="margin-left: 10px; margin-right: 5px">Query Title: </span></td>
			<td nowrap="nowrap" style="width: 90%"><input type='search'
				placeholder="Query Name" id="queryName" style="width: 100%">
				<span style="color: red; margin-left: 0px; vertical-align: top">*</span>
			</td>
		</tr>
	</table>
</div>
<div id="sql_query_builder_div" style="height: auto;"></div>
<ul id="query_builder_tab" style="display: none;">
	<li id="sql_query_builder_li"><a
		href="javascript:DataAnalyzer.showTab('1');">SQL Query Builder</a></li>
	<li id="gui_query_builder_li" class="deactive"><a
		href="javascript:DataAnalyzer.showTab('2');">Graphical Query
			Builder</a></li>
</ul>

<div id="graphical_query_builder_div" style="height: auto; display:">

	<table id="element_table"
		style="width: 100%; padding: 0px; font-size: 9pt;">
		<tr>
			<td style="width: 7%; text-align: left;">Database</td>
			<td style="width: 10%;"><select id="queryIODatabase"
				onchange="javascript:DA.changeQueryIODbName(this.options[this.selectedIndex].value);">
			</select></td>
			<td colspan="7">
				<table id="query_filter_table"
					style="visibility: hidden; width: 100%;">
					<tr>
						<td style="width: 15%;"><input type="checkbox"
							id="is_apply_query_filter"
							onclick="javascript:DA.applyQueryFilter();"> Input Path
							Filter</td>
						<td><span class="sbox" style=""> <input type="search"
								id="query_filter_sql" onclick="DA.showQueryFilterDiv(true);"
								onfocus="DA.showQueryFilterDiv(true);"
								style="width: 100%; visibility: hidden;" readonly></span>

							<div id="query_filter_div" class="filtersBlock"
								style="display: none; width: 65%;">
								<span>Result of this query will be passed as input path
									for hive query.</span> <span id="selectColClose" class="divcloser">
									<a href="javascript:DA.showQueryFilterDiv(false);"><img
										src="images/light-box-close.png" class="closerImage"></a>
								</span>
								<table style="width: 100%;">
									<tr>
										<td style="width: 7%;">SELECT</td>
										<td>filepath</td>
									</tr>
									<tr>
										<td style="width: 7%;">FROM</td>
										<td><span class="sbox"><input type="search"
												id="query_filter_tables" placeholder="From Tables..."
												onfocus="DA.showQueryFilterTables(true);"
												onclick="DA.showQueryFilterTables(true);"
												style="width: 100%; float: left; overflow: auto;" readonly></span>
											<div id="query_filter_tables_div" class="filtersBlock"
												style="display: none;">
												<span>Search On:</span><br>
											</div></td>
									</tr>
									<tr>
										<td style="width: 7%;">WHERE</td>
										<td><span class="sbox"><input type="search"
												id="query_filter_where" placeholder="Where..."
												onfocus="DA.showQueryFilterWhere(true);"
												onclick="DA.showQueryFilterWhere(true);"
												style="width: 100%; float: left; overflow: auto;" readonly></span>
											<div id="query_filter_where_div" class="filtersBlock"
												style="display: none;">
												<span>Search On:</span><br>
											</div></td>
									</tr>
								</table>
							</div></td>
					</tr>
				</table>
			</td>

		</tr>
		<tr>
			<td style="width: 7%;" nowrap="nowrap"><label
				onclick="javascript:DA.appendQuery('SELECT');">SELECT</label></td>
			<td nowrap="nowrap" colspan="8"><span class="sbox" style=""><input
					type="search" id="srch_col_fld" placeholder="Select Column..."
					results="0" onclick="DA.showColFilters(this);"
					onfocus="DA.showColFilters(this);" style="width: 100%;" readonly></span>
				<div id="searchColFilters" class="filtersBlock"
					style="display: none;">
					<span>Search On:</span><br>
				</div></td>
		</tr>


		<tr>
			<td nowrap="nowrap"><label
				onclick="javascript:DA.appendQuery('FROM');"
				style="width: 80px; margin-right: 5px;">FROM</label></td>
			<td nowrap="nowrap" colspan="6"><span class="sbox"><input
					type="search" id="srch_from_fld" placeholder="From Tables..."
					results="0" onfocus="DA.showFromFilters(this);"
					onclick="DA.showFromFilters(this);"
					style="width: 100%; float: left; overflow: auto;" readonly></span>
				<div id="searchFromFilters" class="filtersBlock"
					style="display: none;">
					<span>Search On:</span><br>
				</div></td>

			<td id="resultTableNameTD" nowrap="nowrap" colspan="2"
				style="width: 25%; display: none;"><span> <input
					type="checkbox" id="persist" value="Persist"
					onclick="DA.persistClicked(this.checked);"> <span>Persist
						Result&nbsp;&nbsp; | &nbsp;</span>
			</span> <span id="resultTableNameSpan" style="width: auto;"> <span>Result
						Table &nbsp;&nbsp;&nbsp;&nbsp;</span> <input type="search"
					id="resultTableName" placeholder="Result Table Name" results="0"
					onblur="DA.setResultTableName();" style="width: 200px;">
			</span></td>
		</tr>

		<!-- Start of where  -->
		<tr>

			<td nowrap="nowrap">
				<!-- <input type="checkbox" value="WHERE" id = "wherechkbox" onclick="javascript:DA.setWhereClouse(this);"  > -->WHERE
			</td>


			<td id="where_select_td" style="" colspan="8"><span class="sbox"
				style=""><input type="search" id="where_col"
					placeholder="Where..." results="0" onclick="DA.showWhereCol(this);"
					onfocus="DA.showWhereCol(this);" style="width: 100%;" readonly></span>
				<div id="whereFilters" class="filtersBlock" style="display: none;">
					<span>WHERE:</span><br>

				</div></td>




		</tr>
		<tr>
			<td style="width: 5%;" nowrap="nowrap">
				<!-- <input type="checkbox" value="GROUP BY" id = "grpbychkbox" onclick="javascript:DA.setGroupByClause(this);"> -->GROUP
				BY
				<button class="button"
					onclick="javascript:DA.setGroupByClause('GROUP BY');"
					style="display: none;">GROUP BY</button>
			</td>
			<td id="group_by_select_td" style="" colspan="8"><span
				class="sbox" style=""><input type="search" id="grp_by_col"
					placeholder="Group By..." results="0"
					onclick="DA.showGroupByCol(this);"
					onfocus="DA.showGroupByCol(this);" style="width: 100%;" readonly></span>
				<div id="groupByColFilters" class="filtersBlock"
					style="display: none;">
					<span>Search On:</span><br>

				</div></td>
		</tr>

		<!-- HAVING clause -->
		<tr>
			<td><label>HAVING</label></td>
			<td colspan="8"><span class="sbox" style=""> <input
					type="search" id="having_col" placeholder="Having..." results="0"
					onclick="DA.showHavingCol(this);" onfocus="DA.showHavingCol(this);"
					style="width: 100%;" readonly>
			</span>
				<div id="havingColFilters" class="filtersBlock"
					style="display: none;">
					<span>Search On:</span><br>
				</div></td>
		</tr>

		<tr>
			<td style="width: 5%;" nowrap="nowrap">
				<!-- <input type="checkbox" value="ORDER BY" id = "grpbychkbox" onclick="javascript:DA.setOrderByClouse(this);"> -->ORDER
				BY
			</td>
			<td id="order_by_select_td" style="" colspan="8"><span
				class="sbox" style=""><input type="search" id="order_by_col"
					placeholder="Order By..." results="0"
					onclick="DA.showOrderByCol(this);"
					onfocus="DA.showOrderByCol(this);" style="width: 100%;" readonly></span>
				<div id="orderByColFilters" class="filtersBlock"
					style="display: none;">
					<span>ORDER BY:</span><br>

				</div></td>
		</tr>

		<tr>
			<td nowrap="nowrap" style="width: 7%;"><span>SQL Query </span></td>
			<td colspan="8"><textarea id="query_textarea" rows="" cols=""
					style="width: 100%; height: 100%; margin-top: 10px;"
					onchange="DA.checkQueryEmpty();"></textarea></td>
		</tr>
	</table>
</div>


</div>