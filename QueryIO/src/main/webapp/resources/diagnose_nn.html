<link rel="stylesheet" href="styles/jquery.alerts.css" type="text/css" />

<div id="host_create" class="lightbox" style="width:550px;">
<div id="close" class="close">
	<a href="javascript:BAR.closeBox(false);"><img src="images/light-box-close.png"></a>
</div>

<table class="outer">
       <tbody>
       	<tr>
           	<td id="hdr_td" style="padding: 0pt;">
           		<h4 style="font-weight: normal;"><span id ="headerspan">Diagnosis</span></h4>
           	</td>
       	</tr>
       	<tr>
			<td>
				<table align="center" width="100%" style="border-collapse: collapse;">
					<tbody>
						<tr>
							<td id="msg_td">
								<div class="instructional" id="inst">
								Select the NameNode which needs to be diagnosed
								</div>
							</td>
						</tr>
						<tr>
							<td>
								<hr>
							</td>
						</tr>
						<tr>
							<td>
							 	<table width="100%" class="form_table" id="table" style="display: ">
									<tbody>
										<tr style="display: ;">
											<td style = "text-align:left; width: 25%;">Diagnosis Id*</td>
											<td colspan = "2" style="text-align:right; width: 55%;" >
												<span>
													<input style = "width: 220px;" type="text" name="backupId" id="backupId" value="" onkeypress="javascript:Util.blockSpecialChar(event);">
												</span>
											</td>
										</tr>
										<tr>
											<td style = "text-align:left;width: 25%;">NameNode*</td>
											<td style = "text-align:right;width: 55%;" colspan = "2">
												<select id="nameNodeId" name="nameNodeId" style="width: 232px;"></select>
											</td>
										</tr>
										<tr>
											<td style = "text-align:left;width: 50%;">
												<input type="checkbox" id="stopDiagnose" checked="checked" onclick="javascript:enableValueField();">Stop Diagnosis after N conflicts where N =
											</td>
											<td colspan = "2" style="text-align:right; width: 55%;">	
												<span>								
													<input style = "width: 220px;" type="text" name="nconflict" id="nconflict" value="1000" onkeypress="javascript:Util.blockSpecialChar(event);">
												</span>
											</td>
										</tr>
										<tr>
																		
										</tr>
									</tbody>
								</table>
							</td>
						</tr>
						<tr>
							<td>
								<hr>
							</td>
						</tr>
						<tr>
							<td style="text-align: right; padding: 15px 5px 10px 0px;">
								<input type="button" class="buttonAdmin" id="nextbtn" value="Diagnose" onclick="javascript:BAR.diagnoseNameNode();" /> 
								<input type="button" class="buttonAdmin" id="cancelbtn" value="Cancel" onclick="javascript:BAR.closeBox(false);" />
							</td>
						</tr>
					</tbody>
				</table>
			</td>
		</tr>
	</tbody>
</table>

</div>
<script>
function enableValueField(){
	if($("#stopDiagnose").is(':checked'))
		$('#nconflict').removeAttr('disabled');
	else	
		$('#nconflict').attr('disabled','disabled');
	
}

var date = new Date();
RemoteManager.getAllNameNodeForDBNameMapping(BAR.populateClusterNameNodeIds);
$('#backupId').val('diagnosis_'+date.getDate()+"-"+(date.getMonth()+1)+"-"+date.getFullYear()+"_"+date.getHours()+"_"+date.getMinutes()+"_"+date.getSeconds());
</script>