<link rel="stylesheet" href="styles/new_host_box.css" type="text/css" />

<style>
	input{width:100%;}		  
</style>

<script src="scripts/nn_summary.js"></script>
<script src="scripts/addSecDataNode.js"></script>
<script src="scripts/nn.js"></script>
<script src="scripts/db_config.js"></script>

<div id="host_create" class="lightbox" style="width: 600px">
	<div id="close" class="close">
		<a href="javascript:NN_Summary.closeBox(false);"><img src="images/light-box-close.png"></a>
	</div>
    <table id="host_create_table" class="outer" >
        <tbody>
        	<tr>
            	<td id="hdr_td" style="padding: 0pt;">
            		<h4 style="font-weight: normal;"><span id ="headerspan">Add NameNode</span></h4>
            		
            	</td>
        	</tr>
        	<tr>
            	<td>
                	<div id ="hostDiv">
                		<table align="center" width="100%" style="border-collapse: collapse;">
							<tr>
								<td colspan="2" id="msg_td">
									<div class="instructional" style="" id="nndetail">NameNode keeps the directory tree of all files in the file system, and tracks where across the cluster, the file data is kept.  
									</div>
								</td>
							</tr>
							<tr>
								<td colspan="2">
									<hr>
									<div class="otherinstruction">
									
									</div>
								</td>
							</tr>							
							<tr id="nnType" style="">
								<td style="width: 28%;">
									<span style="padding-left: 11px; text-align: left;">NameNode Type</span>
								</td>
								<td style="width: 90%;">
									<span style="">
										<select id="nameNodetype" onchange="javascript:showNameNodeForm()" style="width: 149px; ">
											<option value="primary">Active</option>
											<option value="secondary">StandBy </option>
										</select>
									</span>
								</td>
							
							</tr>
							<tr>
								<td colspan="2" style="">	
								<form id="nameNodeForm" method="post" action="javascript:void(0);">
									<div id="page1" >
										<table width="100%" class="form_table">
											<tbody>
												<tr>
													<td  style="text-align: left; width: 27%;">NameNode ID</td>
													<td  style="text-align: left;">
														 <input type="text" id="id" value = "NameNode1" style="width: 140px;" onkeypress="javascript:Util.blockSpecialChar(event);">														
													</td>
												</tr>
												<tr>
													<td style="text-align: left; width: 27%;">HostName / IP</td>
													<td style="text-align: left;"> <select id="hostForNode" onchange="javascript:NN_Summary.getPhysicalDiskName(this);" style="width: 152px">
														</select>
													<td style="text-align: right;">
														<input type="button" style="width:130px" class="buttonAdmin" id="add.host"value="Add new host" onclick="javascript:NN_Summary.addNewHost();" />
													</td>													
												</tr>
												<tr>
													<td style="text-align: left; width: 27%;">Metadata Database</td>
													<td style="text-align: left;"> <select id="NameNodeDB" style="width: 152px">
														</select>
													<td style="text-align: right;">
														<input type="button" style="width:130px" class="buttonAdmin" id="add.queryDb"value="Add New Database" onclick="javascript:NN_Summary.addNameNodeDB();" />
													</td>
												</tr>
												<tr>
													<td style = "font-size: 9px; padding-top: 0px;" colspan = "3">To store HDFS metadata, Extended Metadata & user defined tags. Typical use case is for searching files on HDFS cluster based on metadata or user defined tags.
													</td>
												</tr>
												<tr>
													<td colspan="3" style="text-align: left;">
														<input type="checkbox" id="useDifferentDb" onchange="javascript:NN_Summary.toggleDifferentDb(this.checked);" checked><span>Use separate database for AdHoc Query & Analysis.</span>
													</td>
												</tr>
												<tr>
													<td style="text-align: left; width: 27%;">Hive Schema</td>
													<td style="text-align: left;"> <select id="analyticsDB" style="width: 152px">
														</select>
												</tr>
												<tr>
													<td style = "font-size: 9px; padding-top: 0px;" colspan = "3">AdHoc Query & Analysis often generates high volume
of temporary data. It is recommended a separate database be created and used for this.
													</td>
												</tr>
												<tr>
													<td colspan="3">
													<hr>
														<div class="otherinstruction">
															
														</div>
													</td>
												</tr>
											</tbody>
										</table>
										<div style="float: right">
											<input type="button" style="width:60px" class="buttonAdmin" value="Next"	onclick="javascript:NN_Summary.nextPage(2 , 0);" >
											<input type="button" style="width:60px" class="buttonAdmin" value="Cancel" onclick="javascript:NN_Summary.closeBox(false);" >
										</div>
									</div>
									<div id="page2" style="display:none;">
										
										<table id="page2Table"></table><br>
										<hr>
										<div class="otherinstruction">
											
										</div>
										<br>
										<div style="float: right">
											<input type="button" class="buttonAdmin" value="Back"	onclick="javascript:NN_Summary.nextPage(1);" >
											<input type="button" class="buttonAdmin" value="Next"	onclick="javascript:NN_Summary.isPortNumberNumericFields();" >
											<input type="button" class="buttonAdmin" value="Cancel" onclick="javascript:NN_Summary.closeBox(false);" >
										</div>
									</div>
									<div id="page3" style="display:none;">
										<table width="80%" class="form_table" >
											<tbody>
												<tr>
													<td style="text-align: left;">Disk</td>
													<td style="text-align: left;"><select id="disk" style=""> <option value="select disk">Select Disk</option></select></td>
													<td style="text-align: right;">Directory Path</td>
													<td style="text-align: left;"><span><input type="text" id="dirPath" name="dirPath" style="" value="/QueryIONodes/NameNode" > </span></td>
												</tr>
												<tr>
													<td colspan="3"><input type="checkbox" id="startnodechkbox" checked><span>Start Namenode Service after installation</span>
													</td>
												</tr>
											<!-- 	<tr>
													<td colspan="4">
														<div class="otherinstruction">
															<hr>
														</div>
													</td>
												</tr>
												 -->
											</tbody>
										</table>
										<hr>
										<div class="otherinstruction" style=" margin-bottom: 10px;">
															
														</div>
										<div style="float: right">
											<input type="button" class="buttonAdmin" value="Back"	onclick="javascript:NN_Summary.nextPage(2 , 1);" >
											<input type="button" class="buttonAdmin"id="save.host" value="Save"	onclick="javascript:saveHdfsNode();" >
											<input type="button" class="buttonAdmin" id="cancel.host" value="Cancel" onclick="javascript:NN_Summary.closeBox(false);" >
										</div>
									</div>
								</form>
								<form id="secNameNodeForm" method="post" action="javascript:void(0);"	style="display: none;">
										<div  id="secPage1"  >
											<table width="100%" class="form_table" >
												<tbody>
												
												<tr>
														<td style="text-align: left; width: 29%;">NameNode ID</td>
														<td style="text-align: left; padding-left: 0px; width: 137px">
															 <input type="text" id="id" value = "NameNode2" style="width: 137px;" onkeypress="javascript:Util.blockSpecialChar(event);">																	
														</td>
													</tr>
												
												<tr>
														<td style="text-align: left; width: 27%;">HostName / IP</td>
														<td style="text-align: left; padding-left: 0px;">  
															<select onchange="javascript:SecDataNode.getPhysicalDiskName(this);" id="hostForSecNode" style="width: 149px;">
															</select>
														</td>
														<td style="text-align: right;">
															<input style="width: 130px;" type="button" class="buttonAdmin" id="add.host"value="Add new host" onclick="javascript:NN_Summary.addNewHost();" />
														</td>
													</tr>
													
													<tr>
														<td style="text-align: left; width: 27%;">NameNode</td>
														<td style="text-align: left; padding-left: 0px;">  <select  id="NameNodeId" name="NameNodeId" style="width: 149px;">
															</select>
													</tr>
													<tr>
														<td colspan="2">
														<hr>
															<div class="otherinstruction">
																
															</div>
														</td>
													</tr>
												</tbody>
											</table>
											<div style="float: right">
												<input type="button" style="width: 70px;" class="buttonAdmin" value="Next"	onclick="javascript:SecDataNode.nextPage(2);" >
												<input type="button" style="width: 70px;" class="buttonAdmin" value="Cancel" onclick="javascript:SecDataNode.closeBox(false);" >
											</div>
										</div>
										<div  id="secPage2" style="display:none;" >
											<table id = "standByNameNodeSecPage2" width="100%" class="form_table" >
											</table>
											<hr>
											<div class="otherinstruction">
												
											</div>
												
											<div style="float: right">
												<input type="button" style="width: 70px;" class="buttonAdmin" value="Back"	onclick="javascript:SecDataNode.nextPage(1);" >
												<input type="button" style="width: 70px;" class="buttonAdmin" value="Next"	onclick="javascript:SecDataNode.nextPage(3);" >
												<input type="button" style="width: 70px;" class="buttonAdmin" value="Cancel" onclick="javascript:SecDataNode.closeBox(false);" >
											</div>
										</div>
										<div id="secPage3" style="display:none;">
												<table width="100%" class="form_table" >
												<tbody>
													<tr>
													
														<td style="text-align: left; width: 23%">Disk</td>
														<td  style="text-align: left;"><select id="diskForSecNN" style="width: 130px"> <option value="select disk">Select Disk</option></select></td>
													
														<td style="text-align: left;">Directory Path</td>
														<td style="text-align: left;"><input type="text" id="dirPathForSecNN" value="/QueryIONodes/NameNode"	name="dirPath" style=""></td>
													</tr>
													
													<tr>
														<td>High Availability With</td>
														<td colspan="3">
															<span style="">
																<select id="secNNSource" onchange="javascript:SecDataNode.secNNsourceChanged()" style="width: 231px; ">
																	<option value="journal">QJM</option>
																	<option value="path">NFS Mount</option>
																</select>
															</span>														
														</td>														
													</tr>
													
													
													<tr id="journalNodeList" style="display:;">
														<td style="vertical-align: top;">Select Journal Node</td>
														<td colspan="3">
															<select name="journalNodes" multiple="multiple" id="journalNodes" onchange="" style="width: 231px;" width="192px;">
															</select>
														</td>
													</tr>

													<tr id="sharedDirPath" style="display:none;">
														<td>Shared Directory Path </td>
														<td colspan="2"><span><input type="text" id="sharedDirPathForSecNN"
																name="sharedDirPathForSecNN" style="" value="/QueryIONodes/SharedDirectory1"></span></td>
													</tr>

													
													<tr id = 'startNamenodeAfterInstall'>
														<td colspan="3"><input type="checkbox" id="startnodechkbox"><span>Start Secondary Namenode service after installation</span>
														</td>
													</tr>
												</tbody>
												</table>
												<hr>
														<div class="otherinstruction" style=" margin-bottom: 10px;">
															
														</div>
												<div style="float: right">
														<input style="width: 70px;" type="button" class="buttonAdmin" value="Back"	onclick="javascript:SecDataNode.nextPage(2);" >
														<input style="width: 70px;" type="button" class="buttonAdmin" id="save.host" value="Save" onclick="javascript:SecDataNode.saveSecNameNode();" > 
														<input style="width: 70px;" type="button" class="buttonAdmin" id="cancel.host" value="Cancel" onclick="javascript:SecDataNode.closeBox(false);" >
												</div>
											</div>	
									</form>
								</td>
							</tr>	
						</table>
					</div>
            	</td>
        	</tr>
    	</tbody>
	</table>
	<script type="text/javascript">
	fillHostNamesForNameNode();
	fillDBNamesForNameNode(null);
	SecDataNode.ready();
	function showNameNodeForm()
	{
		var type = document.getElementById('nameNodetype').value;
		if(type =='primary')
		{
			$('#secNameNodeForm').css("display","none");
			$('#nameNodeForm').css("display","");
			
		}
		else
		{
			SecDataNode.currentPage = 1;
			$('#secNameNodeForm').css("display","");
			$('#nameNodeForm').css("display","none");
		}
	}	
	NN_Summary.generateUniqueId();
	</script>
</div>