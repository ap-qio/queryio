<link rel="stylesheet" href="styles/nd.css" type="text/css" />
<link rel="stylesheet" href="styles/data_analyzer.css" type="text/css" />

<script type="text/javascript" src="scripts/data_analyzerTab.js"></script>

<script type="text/javascript" src="scripts/table_manager.js"></script>

<div id='data_browser' class="viewDiv">

	<div id="data_analyzer_query_builder"
		style="overflow: auto; position: relative; width: auto; min-height: 650px; display:">
		<div id="rightOverlay" style="height: auto;">
			<div id="rightPanel" style="margin: 3px;">

				<div class="queryHeader" style="text-align: left; margin-top: 8px;">
					<img id="expandQueryProperties" src="images/Right.png"
						style="display: none; height: 15px;"> <img
						id="shrinkQueryProperties" src="images/Down.png"
						style="height: 15px;"> <span style="margin-left: 5px;">Table
						Designer</span>
				</div>
				<div id="divQueryProperties" class="designBackground">
					<table style="width: 100%">

						<tr>
							<td nowrap="nowrap" style="padding-left: 20px;"><span
								id="group_header_span" style="display:">Table Header</span></td>
							<td id="group_header_select_td" colspan="8"
								style="padding-left: 20px;">

								<div
									style="display: inline-block; width: 100%; min-height: 15px;">
									<div id="group_header_preview" class="header-preview-div">
									</div>
								</div>
							</td>
							<td>
								<button class="button"
									onclick="javascript:DA.createCSSGeneratorWizard('groupHeader');"
									style="width: 40px; margin-left: 5px; vertical-align: top;">Edit</button>
							</td>
						</tr>
						<tr>
							<td nowrap="nowrap"><span id="column_header_span"
								style="padding-left: 40px;">Column Header</span></td>
							<td id="column_header_select_td" colspan="8"
								style="padding-left: 40px;">
								<div style="display: inline-block; width: 100%;">
									<div id="column_header_preview" class="header-preview-div">
									</div>
								</div>
							</td>
							<td>

								<button class="button"
									onclick="javascript:DA.createCSSGeneratorWizard('columnHeader');"
									style="width: 40px; margin-left: 5px; vertical-align: top;">Edit</button>
							</td>

						</tr>


						<!-- Column Detail Start -->
						<tr>
							<td nowrap="nowrap"><span id="column_detail_span"
								style="padding-left: 40px;">Column Details</span></td>
							<td id="column_detail_select_td" colspan="8"
								style="padding-left: 40px;">

								<div style="display: inline-block; width: 100%;">
									<div id="column_detail_preview" class="header-preview-div">
									</div>
								</div>
							</td>
							<td>
								<!-- <span class="sbox" style="display: none;"><input type="search"
											id="column_detail_col" placeholder="Column Detail..." results="0" onclick="DA.showColumnDetailByCol(this);"
											onfocus="DA.showColumnDetailByCol(this);" style="width: 95%;"></span>
										<div id="columnDetailColFilters" class="filtersBlock"
											style="display: none;">
											<span>ORDER BY:</span><br>
												
										</div> -->
								<button class="button"
									onclick="javascript:DA.createCSSGeneratorWizard('columnDetail');"
									style="width: 40px; margin-left: 5px; vertical-align: top;">Edit</button>
							</td>

						</tr>

						<tr>
							<td nowrap="nowrap"><span id="group_footer_span"
								style="padding-left: 20px;">Table Footer</span></td>
							<td id="group_footer_select_td" colspan="8"
								style="padding-left: 20px;">

								<div style="display: inline-block; width: 100%;">
									<div id="group_footer_preview" class="header-preview-div">
									</div>
								</div>
							</td>
							<td>
								<button class="button"
									onclick="javascript:DA.createCSSGeneratorWizard('groupFooter');"
									style="width: 40px; margin-left: 5px; vertical-align: top;">Edit</button>
							</td>

						</tr>
					</table>
				</div>


			</div>

		</div>
	</div>
</div>


<script>
	var colList = [];
	var currentDesignerType = "";
	DA.readyTable();

	var chartPosition = '';
	function fillPopUp(flag) {
		var id = DA.selectedQueryId;

		dwr.util.cloneNode('pop.pattern', {
			idSuffix : id
		});
		dwr.util.byId('pop.pattern' + id).style.display = '';
		dwr.util.byId('popup.image.processing' + id).style.display = '';
		dwr.util.setValue('popup.component', 'Query ID');
		dwr.util.setValue('popup.host' + id, id);
		dwr.util.setValue('popup.message' + id, 'Processing Request...');

		var str = JSON.stringify(DA.queryInfo);
		if (DA.isDelete) {
			dwr.util.setValue('popup.status' + id, 'Deleting..');
		} else if (DA.isClone) {
			dwr.util.setValue('popup.status' + id, 'Cloning..');
			var str = JSON.stringify(DA.cloneData);
			RemoteManager.saveBigQuery(DA.selectedNameNode, DA.selectedDbName,
					str, DA.querySaveResponse);
			DA.isClone = false;
		} else {
			dwr.util.setValue('popup.status' + id, 'Saving..');
			RemoteManager.saveBigQuery(DA.selectedNameNode, DA.selectedDbName,
					str, DA.querySaveResponse);
		}

	}

	function closePopUpBox() {
		DA.closeBox(true);
	}

	function getOnlyAlphaNumericValues(event) {
		var cod = event.which;
		var code = String.fromCharCode(cod);
		var controlKeys = [ 8, 9, 32, 0 ];
		var isControlKey = controlKeys.join(",").match(new RegExp(event.which));
		if ((code >= 'A' && code <= 'Z') || (code >= '0' && code <= '9')
				|| (code >= 'a' && code <= 'z') || (code >= 35 && code <= 40)
				|| isControlKey) {
			return;
		} else {
			event.preventDefault();
		}
	}

	BQS.totalQuery = $('select#bigQueryIds option').length + 1;
	$('#queryId').val("New Query " + DA.checkID(BQS.totalQuery));
	//$('#queryId').val("New Query "+BQS.totalQuery);
	$('#queryIdTitle').text($('#queryId').val());
	$("#design_link").text("Design: " + $("#queryId").val());
	$("#preview_span").text("Preview: " + $("#queryId").val());

	if (BQS.totalQuery == 1) {
		Navbar.isAddNewQuery = true;
	}
	if (Navbar.isAddNewQuery) {
		DAT.tempQuery = $('#queryId').val();
		DA.isNewQuery = true;
		DA.selectedQueryId = $('#queryId').val();
	} else {
		DA.isNewQuery = false;
	}

	function showPalette() {
		Util.addLightbox('export', 'resources/color-palette.html');
	}
	var previewCharts = new Array();

	function chartPositionChanged() {
		var pos = $('#chart_position').val();
		if (pos == 'queryHeader') {
			$('#chart_col_opt').text('Column Span');
		} else {
			$('#chart_col_opt').text('Column Span');

		}

	}
</script>

<script src="scripts/dropdown.textbox.js"></script>

