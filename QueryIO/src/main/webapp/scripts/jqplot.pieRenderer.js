(function(f){function q(){for(i=0;i<this.series.length;i++)this.series[i].renderer.constructor==f.jqplot.PieRenderer&&this.series[i].highlightMouseOver&&(this.series[i].highlightMouseDown=!1);this.target.bind("mouseout",{plot:this},function(a){m(a.data.plot)})}function r(){for(var a=0;a<this.series.length;a++)this.series[a].seriesColors=this.seriesColors,this.series[a].colorGenerator=this.colorGenerator}function p(a,c,d){var e=a.series[c],b=a.plugins.pieRenderer.highlightCanvas;b._ctx.clearRect(0,
0,b._ctx.canvas.width,b._ctx.canvas.height);e._highlightedPoint=d;a.plugins.pieRenderer.highlightedSeriesIndex=c;e.renderer.drawSlice.call(e,b._ctx,e._sliceAngles[d][0],e._sliceAngles[d][1],e.highlightColorGenerator.get(d),!1)}function m(a){var c=a.plugins.pieRenderer.highlightCanvas;c._ctx.clearRect(0,0,c._ctx.canvas.width,c._ctx.canvas.height);for(c=0;c<a.series.length;c++)a.series[c]._highlightedPoint=null;a.plugins.pieRenderer.highlightedSeriesIndex=null;a.target.trigger("jqplotDataUnhighlight")}
function s(a,c,d,e,b){e?(c=[e.seriesIndex,e.pointIndex,e.data],d=jQuery.Event("jqplotDataMouseOver"),d.pageX=a.pageX,d.pageY=a.pageY,b.target.trigger(d,c),b.series[c[0]].highlightMouseOver&&!(c[0]==b.plugins.pieRenderer.highlightedSeriesIndex&&c[1]==b.series[c[0]]._highlightedPoint)&&(d=jQuery.Event("jqplotDataHighlight"),d.pageX=a.pageX,d.pageY=a.pageY,b.target.trigger(d,c),p(b,c[0],c[1]))):null==e&&m(b)}function t(a,c,d,e,b){e?(c=[e.seriesIndex,e.pointIndex,e.data],b.series[c[0]].highlightMouseDown&&
!(c[0]==b.plugins.pieRenderer.highlightedSeriesIndex&&c[1]==b.series[c[0]]._highlightedPoint)&&(d=jQuery.Event("jqplotDataHighlight"),d.pageX=a.pageX,d.pageY=a.pageY,b.target.trigger(d,c),p(b,c[0],c[1]))):null==e&&m(b)}function u(a,c,d,e,b){a=b.plugins.pieRenderer.highlightedSeriesIndex;null!=a&&b.series[a].highlightMouseDown&&m(b)}function v(a,c,d,e,b){e&&(c=[e.seriesIndex,e.pointIndex,e.data],d=jQuery.Event("jqplotDataClick"),d.pageX=a.pageX,d.pageY=a.pageY,b.target.trigger(d,c))}function w(a,c,
d,e,b){e&&(c=[e.seriesIndex,e.pointIndex,e.data],d=b.plugins.pieRenderer.highlightedSeriesIndex,null!=d&&b.series[d].highlightMouseDown&&m(b),d=jQuery.Event("jqplotDataRightClick"),d.pageX=a.pageX,d.pageY=a.pageY,b.target.trigger(d,c))}function x(){this.plugins.pieRenderer={highlightedSeriesIndex:null};this.plugins.pieRenderer.highlightCanvas=new f.jqplot.GenericCanvas;var a=f(this.targetId+" .jqplot-data-label");a.length?f(a[0]).before(this.plugins.pieRenderer.highlightCanvas.createElement(this._gridPadding,
"jqplot-pieRenderer-highlight-canvas",this._plotDimensions)):this.eventCanvas._elem.before(this.plugins.pieRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pieRenderer-highlight-canvas",this._plotDimensions));this.plugins.pieRenderer.highlightCanvas.setContext()}f.jqplot.PieRenderer=function(){f.jqplot.LineRenderer.call(this)};f.jqplot.PieRenderer.prototype=new f.jqplot.LineRenderer;f.jqplot.PieRenderer.prototype.constructor=f.jqplot.PieRenderer;f.jqplot.PieRenderer.prototype.init=
function(a,c){this.diameter=null;this.padding=20;this.sliceMargin=0;this.fill=!0;this.shadowOffset=2;this.shadowAlpha=0.07;this.shadowDepth=5;this.highlightMouseOver=!0;this.highlightMouseDown=!1;this.highlightColors=[];this.dataLabels="percent";this.showDataLabels=!1;this.dataLabelFormatString=null;this.dataLabelThreshold=3;this.dataLabelPositionFactor=0.52;this.dataLabelNudge=2;this.dataLabelCenterOn=!0;this.startAngle=0;this.tickRenderer=f.jqplot.PieTickRenderer;this._drawData=!0;a.highlightMouseDown&&
null==a.highlightMouseOver&&(a.highlightMouseOver=!1);f.extend(!0,this,a);null!=this.diameter&&(this.diameter-=this.sliceMargin);this._radius=this._diameter=null;this._sliceAngles=[];this._highlightedPoint=null;if(0==this.highlightColors.length)for(var d=0;d<this.seriesColors.length;d++){for(var e=f.jqplot.getColorComponents(this.seriesColors[d]),e=[e[0],e[1],e[2]],b=e[0]+e[1]+e[2],g=0;3>g;g++)e[g]=570<b?0.8*e[g]:e[g]+0.3*(255-e[g]),e[g]=parseInt(e[g],10);this.highlightColors.push("rgb("+e[0]+","+
e[1]+","+e[2]+")")}this.highlightColorGenerator=new f.jqplot.ColorGenerator(this.highlightColors);c.postParseOptionsHooks.addOnce(r);c.postInitHooks.addOnce(q);c.eventListenerHooks.addOnce("jqplotMouseMove",s);c.eventListenerHooks.addOnce("jqplotMouseDown",t);c.eventListenerHooks.addOnce("jqplotMouseUp",u);c.eventListenerHooks.addOnce("jqplotClick",v);c.eventListenerHooks.addOnce("jqplotRightClick",w);c.postDrawHooks.addOnce(x)};f.jqplot.PieRenderer.prototype.setGridData=function(){var a=[],c=[],
d=0;this._drawData=!1;for(var e=0;e<this.data.length;e++)0!=this.data[e][1]&&(this._drawData=!0),a.push(this.data[e][1]),c.push([this.data[e][0]]),0<e&&(a[e]+=a[e-1]),d+=this.data[e][1];for(var b=2*Math.PI/a[a.length-1],e=0;e<a.length;e++)c[e][1]=a[e]*b,c[e][2]=this.data[e][1]/d;this.gridData=c};f.jqplot.PieRenderer.prototype.makeGridData=function(a){var c=[],d=[],e=0;this._drawData=!1;for(var b=0;b<a.length;b++)0!=this.data[b][1]&&(this._drawData=!0),c.push(a[b][1]),d.push([a[b][0]]),0<b&&(c[b]+=
c[b-1]),e+=a[b][1];for(var f=2*Math.PI/c[c.length-1],b=0;b<c.length;b++)d[b][1]=c[b]*f,d[b][2]=a[b][1]/e;return d};f.jqplot.PieRenderer.prototype.drawSlice=function(a,c,d,e,b){function f(){d>6.282+this.startAngle&&(d=6.282+this.startAngle,c>d&&(c=6.281+this.startAngle));c>=d||(a.beginPath(),a.fillStyle=e,a.strokeStyle=e,a.lineWidth=h,a.arc(0,0,l,c,d,!1),a.lineTo(0,0),a.closePath(),j?a.fill():a.stroke())}if(this._drawData){var l=this._diameter/2,j=this.fill,h=this.lineWidth;a.save();a.translate(this._center[0],
this._center[1]);a.translate(this.sliceMargin*Math.cos((c+d)/2),this.sliceMargin*Math.sin((c+d)/2));if(b)for(var k=0;k<this.shadowDepth;k++)a.save(),a.translate(this.shadowOffset*Math.cos(this.shadowAngle/180*Math.PI),this.shadowOffset*Math.sin(this.shadowAngle/180*Math.PI)),f();else f()}if(b)for(k=0;k<this.shadowDepth;k++)a.restore();a.restore()};f.jqplot.PieRenderer.prototype.draw=function(a,c,d,e){var b;d=new f.jqplot.ColorGenerator(this.seriesColors);b=a.canvas.width;var g=a.canvas.height,l=Math.min(b-
0-2*this.padding,g-0-2*this.padding);this._diameter=this.diameter||l-this.sliceMargin;this._radius=this._diameter/2;l=this.startAngle/180*Math.PI;this._center=[(b-0)/2+0,(g-0)/2+0];if(this.shadow){var j="rgba(0,0,0,"+this.shadowAlpha+")";for(b=0;b<c.length;b++)g=0==b?l:c[b-1][1]+l,g+=this.sliceMargin/180*Math.PI,this.renderer.drawSlice.call(this,a,g,c[b][1]+l,j,!0)}for(b=0;b<c.length;b++)if(g=0==b?l:c[b-1][1]+l,g+=this.sliceMargin/180*Math.PI,j=c[b][1]+l,this._sliceAngles.push([g,j]),this.renderer.drawSlice.call(this,
a,g,j,d.next(),!1),this.showDataLabels&&100*c[b][2]>=this.dataLabelThreshold){var h,g=(g+j)/2;"label"==this.dataLabels?(h=this.dataLabelFormatString||"%s",h=f.jqplot.sprintf(h,c[b][0])):"value"==this.dataLabels?(h=this.dataLabelFormatString||"%d",h=f.jqplot.sprintf(h,this.data[b][1])):"percent"==this.dataLabels?(h=this.dataLabelFormatString||"%d%%",h=f.jqplot.sprintf(h,100*c[b][2])):this.dataLabels.constructor==Array&&(h=this.dataLabelFormatString||"%s",h=f.jqplot.sprintf(h,this.dataLabels[b]));var k=
this._radius*this.dataLabelPositionFactor+this.sliceMargin+this.dataLabelNudge,j=this._center[0]+Math.cos(g)*k+this.canvas._offsets.left,k=this._center[1]+Math.sin(g)*k+this.canvas._offsets.top,n=f('<div class="jqplot-pie-series jqplot-data-label" style="position:absolute;">'+h+"</div>").insertBefore(e.eventCanvas._elem),j=this.dataLabelCenterOn?j-n.width()/2:j-n.width()*Math.sin(g/2),k=k-n.height()/2,j=Math.round(j),k=Math.round(k);n.css({left:j,top:k})}};f.jqplot.PieAxisRenderer=function(){f.jqplot.LinearAxisRenderer.call(this)};
f.jqplot.PieAxisRenderer.prototype=new f.jqplot.LinearAxisRenderer;f.jqplot.PieAxisRenderer.prototype.constructor=f.jqplot.PieAxisRenderer;f.jqplot.PieAxisRenderer.prototype.init=function(a){this.tickRenderer=f.jqplot.PieTickRenderer;f.extend(!0,this,a);this._dataBounds={min:0,max:100};this.min=0;this.max=100;this.showTicks=!1;this.ticks=[];this.show=this.showMark=!1};f.jqplot.PieLegendRenderer=function(){f.jqplot.TableLegendRenderer.call(this)};f.jqplot.PieLegendRenderer.prototype=new f.jqplot.TableLegendRenderer;
f.jqplot.PieLegendRenderer.prototype.constructor=f.jqplot.PieLegendRenderer;f.jqplot.PieLegendRenderer.prototype.init=function(a){this.numberColumns=this.numberRows=null;f.extend(!0,this,a)};f.jqplot.PieLegendRenderer.prototype.draw=function(){if(this.show){var a=this._series;table_count++;this._elem=f('<table id = "legend-table'+table_count+'" class="jqplot-table-legend"  ></table>');var c=!1,d,e;d=a[0];a=new f.jqplot.ColorGenerator(d.seriesColors);if(d.show){var b=d.data;this.numberRows?(d=this.numberRows,
e=this.numberColumns?this.numberColumns:Math.ceil(b.length/d)):this.numberColumns?(e=this.numberColumns,d=Math.ceil(b.length/this.numberColumns)):(d=b.length,e=1);var g,l,j,h,k,n,m=0;for(g=0;g<e;g++){j=f('<tr class="jqplot-table-legend"></tr>').appendTo(this._elem);for(l=0;l<d;l++)m<b.length&&(k=this.labels[m]||b[m][0].toString(),n=a.next(),h=(c=0<g?!0:!1)?this.rowSpacing:"0",c=f('<td class="jqplot-table-legend" style="text-align:center;padding-top:'+h+';"><div><div class="jqplot-table-legend-swatch" style="border-color:'+
n+';"></div></div></td>'),h=f('<td class="jqplot-table-legend" style="padding-top:'+h+';"></td>'),this.escapeHtml?h.text("<span>"+k+"</span>"):h.html("<span>"+k+"</span>"),c.appendTo(j),h.appendTo(j)),m++}}}return this._elem};f.jqplot.PieRenderer.prototype.handleMove=function(a,c,d,e,b){e?(a=[e.seriesIndex,e.pointIndex,e.data],b.target.trigger("jqplotDataMouseOver",a),b.series[a[0]].highlightMouseOver&&!(a[0]==b.plugins.pieRenderer.highlightedSeriesIndex&&a[1]==b.series[a[0]]._highlightedPoint)&&
(b.target.trigger("jqplotDataHighlight",a),p(b,a[0],a[1]))):null==e&&m(b)};f.jqplot.preInitHooks.push(function(a,c,d){d=d||{};d.axesDefaults=d.axesDefaults||{};d.legend=d.legend||{};d.seriesDefaults=d.seriesDefaults||{};a=!1;if(d.seriesDefaults.renderer==f.jqplot.PieRenderer)a=!0;else if(d.series)for(c=0;c<d.series.length;c++)d.series[c].renderer==f.jqplot.PieRenderer&&(a=!0);a&&(d.axesDefaults.renderer=f.jqplot.PieAxisRenderer,d.legend.renderer=f.jqplot.PieLegendRenderer,d.legend.preDraw=!0,d.seriesDefaults.pointLabels=
{show:!1})});f.jqplot.PieTickRenderer=function(){f.jqplot.AxisTickRenderer.call(this)};f.jqplot.PieTickRenderer.prototype=new f.jqplot.AxisTickRenderer;f.jqplot.PieTickRenderer.prototype.constructor=f.jqplot.PieTickRenderer})(jQuery);